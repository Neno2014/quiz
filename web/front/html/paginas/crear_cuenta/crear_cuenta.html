<div class='container'>
	<div class='row'>
		<div class='col s10 offset-s1'>
			<h1 class='center-align teal-text'>Crear una cuenta</h1>
		</div>
	</div>
	<div class='row'>
		<div class='col s10 m8 l6 offset-l3 offset-m2 offset-s1'>
			<div class="input-field">
				<input id='email' type='email' name='email'></input>
				<label for="email">Email</label>
			</div>
			<div class="input-field">
				<input id='username' type='text' name='username'></input>
				<label for="email">Nombre de usuario</label>
			</div>
			<div class="input-field">
				<input id='password' type='password' name='password'></input>
				<label for="password">Contraseña</label>
			</div>
			<div class="input-field">
				<input id='password2' type='password' name='password2'></input>
				<label for="password2">Repetir contraseña</label>
			</div>
			<button id='btn-crear' class='btn'>Crear</button>
			<div id='msg-error'></div>

		</div>
	</div>
</div>


<script>
$(document).ready(function(){

	function crearCuenta(){
		var email = $('#email').val();
		var nombre = $('#username').val();
		var password = $('#password').val();
		var password2 = $('#password2').val();
		if(password!=password2){
			$('#msg-error').text('Las contraseñas no coinciden.');
			return;
		}
		$.post('/api/crear_cuenta',{email:email, nombre:nombre, password:password},function(r){
			var resultado = JSON.parse(r);
			if(resultado.error){
				$('#msg-error').text(resultado.error);
			}else{
				window.location = '/';
			}
		});
	}
	
	$('#btn-crear').on('click',function(){
		crearCuenta();
	});
	
	$('#password2').on('keyup',function(ev){
		if(ev.keyCode==13){
			crearCuenta();
		}
	});
	
	
});
</script>